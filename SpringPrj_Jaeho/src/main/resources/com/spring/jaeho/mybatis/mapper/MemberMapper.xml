<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.jaeho.mybatis.mapper.MemberMapper">

	<insert id="insertMember" parameterType="MemberDTO">
		INSERT INTO member
		(m_id,m_name,m_zip1,m_zip2,m_zip3,m_password,m_userEmail,m_userEmailHash,m_userEmailChecked,m_tel)
		VALUES(#{m_id},#{m_name},#{m_zip1},#{m_zip2},#{m_zip3},#{m_password},#{m_userEmail}
		,#{m_userEmailHash},FALSE,#{m_tel})
	</insert>

	<update id="setUserEmailChecked">
		UPDATE member SET m_userEmailChecked = 1 WHERE
		m_userEmailHash =#{ism_userEmailChecked}
	</update>
	
	<select id="login" parameterType="MemberDTO" resultType="String">
		SELECT m_id FROM member WHERE m_id=#{m_id} AND m_password=#{m_password}
	</select>
	
	<select id="getUserEmailChecked" parameterType="MemberDTO" resultType="Integer">
	   select m_userEmailChecked from member where m_id=#{m_id}
	</select>
	
	<select id="viewMember" parameterType="MemberDTO" resultType="MemberDTO">
	SELECT  m_id,m_name,m_userEmail  FROM member WHERE m_id=#{m_id} AND m_password=#{m_password}
	</select>
	
	<select id="selectId" resultType="String">
	 SELECT m_id FROM member WHERE m_id=#{m_id}
	</select>
	
	<select id="SearchID" resultType="String" parameterType="MemberDTO" >
	SELECT m_id FROM member WHERE m_name=#{m_name} AND m_userEmail=#{m_userEmail}
	</select>
	
	<select id="SearchPW" resultType="String">
	SELECT m_userEmailHash FROM member WHERE m_id=#{m_id} AND m_userEmail=#{m_userEmail}
	</select>
	
	<update id="updatePW" >
	  UPDATE member SET  m_password =#{m_userEmailHash} WHERE m_password=#{m_password} 
	</update>
	
	<select id="selectPW" resultType="String">
	  SELECT m_password FROM member WHERE m_id = #{m_id}
	</select>
	
	<delete id="Remove">
      DELETE FROM member WHERE m_name=#{m_name};
	</delete>
	
	
</mapper>